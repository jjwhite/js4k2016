function game(e, s) { t = this, t.ht = e, t.at = s, t.hs = 0, t.as = 0, t.hg = 0, t.ag = 0, t.hset = 0, t.aset = 0, t.cset = 1, t.st = t.ht, $("#hp")[0].textContent = t.ht.p1 + "/" + t.ht.p2, $("#ap")[0].innerHTML += t.at.p1 + "/" + t.at.p2, $("#hp")[0].classList.add("serve") } function $(t) { return document.querySelectorAll(t) } function verbGenerator() { return verbs[getResult(verbs.length) - 1] } function getResult(t) { return Math.floor(Math.random() * t) + 1 } function buildSummary(t, e, s, a, n) { return t.replace("{p1}", e).replace("{p2}", s).replace("{t}", a).replace("{v}", n) } var sack, summary, scarytime, showWinner; document.addEventListener("DOMContentLoaded", function (t) { var e = new game(home, away); $("#button")[0].addEventListener("click", function () { e.point() }, !1), sack = $("#sack")[0], summary = $("#summary")[0] }), game.prototype.point = function () { t = this; var e = Math.random() >= .5 ? "h" : "a", s = "h" == e ? t.setScore(t.hs, t.as) : t.setScore(t.as, t.hs); switch (e) { case "h": "w" == s[0] ? (t.hg++, 4 == t.hg && t.hset++, t.hasWinner(t.hg, t.hset)) : (t.hs = s[0], t.as = s[1]); break; case "a": "w" == s[0] ? (t.ag++, 4 == t.ag && t.aset++, t.hasWinner(t.ag, t.aset)) : (t.as = s[0], t.hs = s[1]) } t.getSummary(e) }, game.prototype.setScore = function (e, s) { t = this; var a = [e, s]; return "a" == e ? a[0] = "w" : 40 == e && 40 > s ? a[0] = "w" : "d" == e ? (a[0] = "a", a[1] = "na") : "na" == e ? (a[0] = "d", a[1] = "d") : 40 > e && (a[0] = this.doScore(e), 40 == a[0] && 40 == s && (a[0] = "d", a[1] = "d")), a }, game.prototype.doScore = function (t) { return 30 > t ? t + 15 : t + 10 }, game.prototype.hasWinner = function (e, s) { this.as = 0, this.hs = 0, t.st = t.st == t.ht ? t.at : t.ht, 1 == s && 3 == e && alert("Scary Game"), 4 == e && ($("#as" + this.cset)[0].textContent = this.ag, $("#h" + this.cset)[0].textContent = this.hg, this.cset++, this.ag = 0, this.hg = 0), 2 == s && (showWinner = !0) }, game.prototype.updateSB = function () { $("#hg")[0].textContent = this.hg, $("#ag")[0].textContent = this.ag, $("#hpt")[0].textContent = this.hs, $("#apt")[0].textContent = this.as, $("#as")[0].textContent = this.aset, $("#hs")[0].textContent = this.hset, t.st == t.ht ? ($("#ap")[0].classList.remove("serve"), $("#hp")[0].classList.add("serve")) : ($("#hp")[0].classList.remove("serve"), $("#ap")[0].classList.add("serve")), showWinner && ($("#winner")[0].style.display = "block") }, game.prototype.getSummary = function (t) { var e, s, a = this, n = "h" == t ? this.ht : this.at, r = "h" == t ? this.at : this.ht, h = n == this.st ? 9 : 8, i = "#s" + getResult(h), o = $(i)[0].dataset.value, c = Math.random() >= .5 ? buildSummary(o, n.p1, r.p1, n.p1 + "/" + n.p2, verbGenerator()) : buildSummary(o, n.p2, r.p2, n.p1 + "/" + n.p2, verbGenerator()); c.includes("Ace") ? (e = t + "-ace", s = 500) : (e = t + "-v1", s = 2e3), sack.className = e, setTimeout(function () { c += 0 == a.hs && 0 == a.as ? " - <strong>" + n.p1 + "/" + n.p2 + " wins!</strong>" : "d" == a.hs ? " - <strong>Deuce!</strong>" : "a" == a.hs || "a" == a.as ? "- <strong>Advantage " + n.p1 + "/" + n.p2 : " - <strong>" + a.hs + ":" + a.as + "</strong>", $(".summary-line")[$(".summary-line").length - 1].classList.remove("blink_me"), summary.innerHTML += '<div class="summary-line blink_me">' + c + "</div>", summary.scrollTop = summary.scrollHeight, a.updateSB(), sack.className = "none" }, s) }; var verbs = ["McNugget", "Melvin", "Sparkle Motion", "Tricky Doodle", "Taint Tickler", "Gate Storm"], htanm = [{ css: "h-ace", time: 1 }], atanm = [{ css: "a-ace", time: 1 }, { css: "a-v1", time: 2 }], home = { p1: "Jon", p2: "Eric" }, away = { p1: "Sam", p2: "Deuce" };